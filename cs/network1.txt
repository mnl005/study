네트워크 : 여러 장치가 연결되어 정보를 주고받을 수 있는 통신망, 노드들이 간선으로 연결된 그래프의 형태이다
네트워크 장비 : 중간노드(허브,스위치,라우터,공유기 등), 호스트간 정보의 이동을 돕는다
메시지 : 노드들이 주고받는 정보
호스트 : 네트워크의 가장자리에 위치하는 노드
서버 : 서비스를 제공하는 호스트
클라이언트 : 서버에게 서비스를 요청하고 응답받는 호스트


네트워크 계층 모델 : 통신이 일어나는 각 과정을 네트워크 범위 따라서 추상화된 계층으로 나눈 구조, 가이드라인,
... 특정 계층 변경시 다른 계층에 영향을 주지 않는다, 네트워크통해 정형화된 여러 단계를 거쳐 정보를 주고 받는다
물리 계층 : 비트신호 주고받는 계층성, 주소 개념이 없다 즉 송수신되는 정보에 대한 조작이나 판단을 하지 않는다
데이터링크 계층 : 네트워크 내 장치간 정보 주고받기위한 계층 (MAC주소)
네트워크 계층 : 네트워크와 네트워크간 통신 (IP)
전송계층 : 신뢰성.안전성 있는 전송을 보장해준다, 패킷흐름제어.전송오류점검.포트정보로 응용프로그램 식별 (TCP,UDP)
세션 계층 : 통신 주고받는 대상간 연결상태 관리
표현계층 : 코드변환,암축,암호화
응용계층 : 응용 프로그램에 네트워크 서비스 제공


TCP/IP 모델 : 구현에 중점을 둔 참조모델
네트워크 엑세스 (링크)계층 : OSI의 물리계층과 데이터링크 계층
인터넷 계층 : OSI모델의 네트워크계층
전송 계층 : OSI모델의 전송계층
응용계층 : OSI모델의 세션.표현.응용 계층

PDU : 각 계층에서 송수신되는 메시지의 단위
... 데이터(세션.표현.응용), 세그먼트.데이터그램(전송), 패킷(네트워크), 프레임(데이터링크), 비트(물리)
... '패킷' 이란 용어는 네트워크의 PDU 단위로 사용하고, 데이터가 쪼개어져 전송되는 단위를 통칭하기 위한 일반적 용어로도 사용 가능

물리 계층 ------------------------------------------------------------------------------------------------------------------------

이더넷 : 물리계층과 데이터링크 계층에 적용되는 공통된 기술, 현대의 유선 LAN 환경에서 많이 사용,
... 다양한 통신 메체의 규격들과 송수신되는 프레임의 형태와 프레임을 주고받는 방법 등이 정의된 네트워크 기술

물리 계층과 관련된 이더넷 표준 규격의 표현 형태 : 전송속도[변조타입]-추가속성
... 전송속도 : 숫자만 표기시 Mbps속도, G가 뒤에 붙는다면 Gbps의 전송 속도를 가진다
... BASE : 베이스밴드의 약자, 비트신호로 변환된 데이터를 통신메체로 전송하는 방법인 변조타입을 의미
... 추가특성 : 전송가능최대거리나 물리계층 인코딩 방식이나 비트신호를 옮길 수 있는 전송로 수인 레인수가 명시될 수 있다
10BASE-T : 10Mbps속도 지원하는 트위스티드 페어 케이블
1000BASE-SX : 1000Mbps 속도 지원하는 단파장 관섬유 케이블(X는 물리계층에서의 인코딩 방식이다)
1000BASE-LX : 1000Mbps 속도 지원하는 장파장 광섬유 케이블
..... C(동축케이블),T(트위스티드페어케이블),S(단파장광섬유케이블),L(장파장광섬유케이블)

허브 : 여러대의 호스트 연결하는 장치, 전달받은 신호를 다른 모든 포트로 그대로 돌려보낸다(주소개념이 없다),
... 한쪽만 송수신하는 반이중 모드로 송수신한다 이 때문에 호스트가 동시에 허브에 신호를 수신시 충돌(콜리전)이 발생
... CSMA/CD : 콜리전 방지하는 프로토콜
..... CS : 현재 통신 매체의 가능 여부를 검사하는 캐리어 감지
..... MA : 다중접근, 캐리어 감지해도 다중접근하는 상황이 발생에 충돌이 발생
..... CD : 충돌검출을 하여 전송을 중단하고 잼신호로 이를 알려 임의의 시간동안 대기후 재전송한다

데이터링크 계층 ------------------------------------------------------------------------------------------------------------------------

이더넷 프레임 :  캡슐화.비캡슐화 과정거쳐 생성, 현대의 유선랜 환경의 대부분은 이더넷 기반 구성이며 주고받는 프레임 형식이 이더넷 프레임이다

이더넷 프레임의 구성 -
... 헤더 : 프리앰블, 수신지MAC주소, 송신지MAC주소, 타입/길이
... 페이로드 : 데이터
... 트레일러 : FCS

프리앰블 : 이더넷 프레임의 시작을 알리는 정보, 수신지에서 프리앰블 통해 이더넷 프레임이 오고있음을 알아챈다, 송수신지간 동기화 위해 사용되는 정보
수신지.송신지 MAC : 네트워크 인터페이스마다 부여되는 6바이트 길이의 주소, LAN(근거리통신망) 내의 수신지와 송신지 특정 가능,
... 같은 네트워크상 MAC주소는 일반적으로 고유하고 일반적으로 변경되지 않는 주소로서 네트워크 인터페이스마다 부여,
... NIC가 네트워크 인터페이스 역할을 담당하며 한 컴퓨터에 NIC가 여럿일때 MAC주소도 여러개일 수 있다
타입/길이 : 크기가 16진수 05DC 이하일 경우 타입, 아니라면 길이
... 타입은 어떤정보를 캡슐화했는지, 대표적으로 상위 계층에서 사용된 프로토콜의 이름이 명시된다
... 길이는 프레임의 크기이다
데이터 : 상위 계층에서 전달받거나 전달해야 할 내용, 반드시 46바이트 이상이여야 하며 그 이하라면 패딩을 통해 내부에 정보가 채워진다
FCS : 이더넷 프레임에 오류가 있는지 확인을 위한 필드, 오류 검출용 값(CRC)인 순환중복 검사 값이 들어간다,
... 송신지는 프리앰블을 제외한 나머지 필드 값을 바탕으로 CRC값을 계산해 FCS필드에 명시
... 수신지는 수신한 프레임에서 FCS 필드 제외한 나머지 필드 값을 바탕으로 CRC 값을 계산해 FCS와 비교, 비교값 불일치시 해당 프레임 패기

NIC : 호스트와 통신매체 연결하고 맥 주소가 부여되는 네트워크 장비, 네트워크 인터페이스 역할을 수행한다
... 호스트를 네트워크(LAN)에 연결하기 위한 하드웨어, 명칭은 인터페이스카드.네트워크어뎁터.LAN카드.네트워크카드.이더넷카드 등으로 불린다
... 카드라는 명칭 들어가는 이유는 초기에 확장카드 형태로 연결해 사용했기 때문
... 현재의 형태는 USB나 마더보드에 내장되는 등 다양한 형태로 존재
... 프레임 도달시 자신과 관련없는 MAC주소 명시된 경우 프레임을 패기

스위치(L2) : 여러 호스트를 연결해 허브와 유사하나, MAC주소를 학습해 특정 주소에 프레임을 전달가능,
... 전이중모드 지원으로 CSMA/CD가 불필요해져 대기시간이 없어짐으로 허브보다 이더넷 구성시 성능상 유리하다
... MAC 주소 테이블로 스위치의 포트와 연결된 호스트와의 연관관계를 메모리에 표 형태로 기억한다
... 주소학습과정 : 스위치에 여러 포트가 연결되어 있고 테이블이 빈상태이다 -> 한 호스트1에서 프레임을 수신할때 해당 호스트1의 주소를 저장
... -> 송신지 주소인 호스트1 주소 제외한 나머지 모든 주소로 프레임전송(플러딩) -> 호스트3에서 정보 받아 응답 전송 하고 테이블에 호스트3주소 저장 ->
... 테이블에 호스트1.호스트3 주소가 있어 전달받을 프레임을 결정(필터링) 하여 호스트1에 전달(포워딩) -> 일정시간이산 프레임 미전송시 해당항목삭제(에이징)
... VLAN : 스위치로 만드는 가상의 LAN, 스위치에 연결된 호스트를 논리적 단위로 분리해 호스트를 그룹화 하는것
..... 포트기반 VLAN : 스위치의 포트를 그룹을 나누는 기준으로 삼는다, 낭비되는 포트를 해결하기 위해 트렁크 포트로 두개의 스위치를 연결
..... MAC기반 VLAN : 송수신되는 프레임의 MAC주소로 호스트가 속할 VLAN을 결정하는 방식

브리지 : 허브와 허브를 연결, 스위치의 기능제공, 스위치가 브리지의 기능 포괄하여 사용빈도가 줄어드는 추세



네트워크 계층 ------------------------------------------------------------------------------------------------------------------------
+ 맥주소는 물리주소로 NIC마다 고정할당, IP주소는 논리주소로 호스트마다 직접할당, 물리.데이터링크 계층으로만으로 어려운 네트워크 간 통신을 네트워크 계층으로한다

IP : 인터넷 프로토콜

IP 주소지정 : IP주소 바탕으로 송수신 대상을 결정
IP 단편화 : 전송 패킷 크기가 최대전송단위(MTU)보다 클때 MTU 크기 이하의 복수의 패킷으로 나누는 것, 수신지에서 나뉜 패킷이 재조합된다

IPv4 주소 : 8비트의 10진수를 점으로 구분한 4바이트 크기의 주소, 점으로 구분된 8비트를 옥텟이라 한다
IPv4 패킷 : 이더넷 프레임의 데이터 부분에 존재(헤더+페이로드)
IPv4 패킷 해더 구성 : 버전,해더길이,서비스유형,패킷길이,식별자,{플래그,단편화오프셋,TTL,프로토콜,헤더체크섬,송신지IP주소,수신지IP주소},옵션,패딩
IPv4 패킷 페이로드 구성 : 데이터
... 식별자 : 쪼개진 패킷의 재조합시 어떤 메시지에서 쪼개졌는지 인식하는 식별자
... 플래그 : 3비트구성, 첫비트는항상0, 두번째는 1일때 단편화를 수행하지 않는다는 의미(DF), 세번째는 1일때 쪼개진 패킷이 더 있다는 의미(MF)
... 단편화 오프셋 : 단편화된 패킷의 제조합시 참고되는 패킷의 순서
... TTL : 패킷의 수명, 하나의 라우터 거칠때(1홉마다) 1TTL씩 감소, 모두 소진시 패킷 패기
... 프로토콜 : 해당 패킷의 상위 계층의 프로토콜이 무엇인지 나타내는 필드, TCP는6번, UDP는17번
... 송.수신지 IP주소 : 송수신지의 ip주소

IPv6 주소 : 2바이트씩 콜론으로 구분해 8개의 그룹으로 나뉘어 16진수로 표현된 16바이트 크기의 주소
IPv6 패킷 : 이더넷 프레임의 데이터 부분에 존재(헤더+페이로드)
IPv6 패킷 해더 구성 : 버전,트래픽클래스,흐름라벨,페이로드길이,{다음헤더,홉제한,송신지ip주소,수신지ip주소}
IPv6 패킷 페이로드 구성 : 데이터
... 다음헤더 : 상위계층의 프로토콜이나 확장헤더(기본헤더 뒤에 확장헤더1,확장헤더2... 방식으로 추가 가능)
..... IPv4와 달리 기본헤더에 단편화 필드가 없고, 단편화 확장 헤더를 통해 단편화가 이루어짐 구조는 (다음헤더,예약됨,단편화오프셋,예약,M,식별자)
... 예약됨, 예약 : 0으로 설정되어 사용되지 않는다
... 단편화 오프셋 : 단편화된 패킷의 제조합시 참고되는 패킷의 순서
... M플레그 : 1일경우 쪼개진 패킷이 더 있다는 의미
... 식별자 : 쪼개진 패킷의 재조합시 어떤 메시지에서 쪼개졌는지 인식하는 식별자
... 홉제한 : IPv4와 유사하게 패킷의 수명 나타낸다
... 송.수신지 IP주소 : 송수신지의 ip주소
+ IPv4의 해더에 옵션이나 패딩 정보가 포함되어 길이가 가변적이나, IPv6은 헤더 길이가 고정되어 있다

ARP : 동일 내트워크 내의 송수신 대상의 IP주소로 MAC주소를 알아내는 프로토콜
... 호스트1이 동일 내트워크 내 모든 호스트에 브로드캐스트 메시지를 보낸다(ARP요청) ->
... 자신의 아이피를 받은 호스트2는 자신의 MAC주소를 담아 호스트1에 응답(ARP응답) ->
... ARP 활용할 수 있는 모든 호스트는 ARP 테이블 정보를유지(ARP 테이블 갱신)
ARP 패킷 : 이더넷 프레임의 데이터에 (하드웨어유형,프로토콜유형,하드웨어주소길이,프로토콜주소길이,오퍼레이션코드,송.수신지 하드웨어.프로토콜주소) 로 구성
... 오퍼레이션코드 : ARP요청은1, ARP응답은2
... 데이터 : 송신지와 수신지의 하드웨어주소와, 송신지와 수신지의 프로토콜주소 총 4개의주소가 존재, 하드웨어주소는 맥주소이고 프로토콜 주소는 ip주소로
..... ARP 요청시 이더넷 프레임의 수신지 MAC 주소에 브로드캐스트 메시지임을 나타내는 ff:ff:ff:ff:ff:ff 이 명시,
..... 수신지 하드웨어 주소에 00:00:00:00:00:00 가 명시

클래스풀 주소 체계 : 네트워크의 크기에 따라 IP주소를 분리
A클래스 : 0.0.0.0 ~ 127.255.255.255 (네트워크.호스트.호스트.호스트)
B클래스 : 128.0.0.0 ~ 191.255.255.255 (네트워크.네트워크.호스트.호스트)
C클래스 : 192.0.0.0 ~ 233.255.255.255 (네트워크.네트워크.네트워크.호스트)

172.16.12.34 의 네트워크 자체 주소는 172.16.0.0, 브로드캐스트 주소는 172.16.255.255 이다

클래스리스 주소체계 : 클래스 개념 없이 네트워크 영역을 나누어 호스트에게 IP주소 공간을 할당하는 방식, 서브넷 마스크를 활용
서브넷 마스크 : 이진수로 표시된 ip주소에 서브넷 마스크로 and 연산하여 네트워크 주소를 구해 필요한 만큼의 호스트주소 범위를 사용 가능
CIDR 표기법 : 192.168.219.103이 ip주소이고 255.255.255.0이 서브넷 마스크일때 192.168.219.103/24 로 맨뒤에 이진수로표현된
... 서브넷 마스크의 1의 갯수를 표기한다

192.168.0.2/25
11000000.10101000.00000000.00000010 - 아이피주소(192.168.0.2)
11111111.11111111.11111111.10000000 - 서브넷마스크(/25)
둘의 AND 논리 연산으로
192.168.0.0 - 네트워크 주소

공인 IP 주소 : 고유한 IP주소, 공인 주소 할당 기관 통해 할당 가능
사설 IP 주소 : 비공개 네트워크, 예약된 사설 ip를 라우터에게 할당받아 사용, 할당받은 ip는 할당받은 사설 네트워크 내에서만 유효,
... 다른 사설 ip와 중복가능,(10.0.0.0/8,172.16.0.0/12,192.168.0.0/16)

NAT : 사설 ip 주소와 공인 ip주소를 변환, 대부분의 라우터와 공유기는 NAT 기능을 내장
정적 할당 : 호스트에 직접 수작업으로 IP부여
동적 할당 : 사용되지 않을경우 회수되고 할당시마다 다른주소 부여가능
DHCP : 응용계층의 동적 IP 할당 프로토콜, 주소 할당받고자 하는 호스트와 해당 호스트에 ip주소 제공하는 DHCP서버간 메시지를 주고받아 이루어진다,
... 서버의 역할은 일반적으로 라우터(공유기)가 수행, 임대시작.종료일이 존재
DHCP 동작과정
1... Discover : 클라이언트 -> DHCP서버, 클라이언트가 브로드캐스트로 메시지 전송해 DHCP서버를 찾는다
2... Offer : DHCP서버-> 클라이언트, DHCP서버가 클라이언트에 제안할 주소와 서브넷마스크와 임대기간등 정보 전송
3... Request : 클라이언트 -> DHCP서버, 브로드케스트로 Offer 메시지에 대한 응답을 보낸다
4... ACK : DHCP서버 -> 클라이언트, ACK메시지 받은 클라이언트는 해당 주소를 임대 기간동안 사용 가능, 임대기간 종료전 2번의 자동 임대갱신

라우팅 : 패킷이 이동할 최적의 경로를 설정해 해당 경로로 패킷을 이동시키는 것
라우터 : 네트워크 계층의 핵심 장비, L3스위치와 기능상 유사, 멀리 떨어진 호스트 간 통신 과정에서 패킷이 도달하기까지
... 여러대의 라우터를 거친다
홉 : 라우터와 라우터간 이동하는 하나의 과정
라우팅 테이블 :











